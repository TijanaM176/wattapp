<div class="d-flex flex-column h-100">
  <div class="d-flex flex-grow-1">
    <div class="flex-grow-1 col-md-2">
      <app-home-sidebar></app-home-sidebar>
    </div>
    <div class="flex-grow-1 col-md-10">
      <app-pocetna></app-pocetna>
    </div>
  </div>
</div>
<app-popup-add></app-popup-add>
<app-popup-emp></app-popup-emp>
<button
  type="button"
  class="btn btn-primary"
  data-bs-toggle="modal"
  data-bs-target="#exampleModal"
  id="launchButton"
  hidden="true"
>
  Launch demo modal
</button>
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title" id="exampleModalLabel">
          <span style="color: #026670; font-size: 25px; font-weight: 700">
            Unable to locate your location </span
          ><br />
          <small>Please enter the coutry you are working for.</small>
        </p>
      </div>
      <div class="modal-body">
        <div class="form-group pt-3">
          <div class="input-group form-group">
            <input
              class="form-control"
              type="text"
              [(ngModel)]="currentCountry"
              (ngModelChange)="Validate($event)"
              placeholder="Country"
              style="
                width: 150px;
                height: 30px;
                background-color: #e7e5e5;
                color: #466471;
                border-radius: 5px;
              "
            />
          </div>
        </div>
        <small *ngIf="!validInput" class="text-danger"
          >Country is required!</small
        >
      </div>
      <div class="modal-footer">
        <button
          type="button"
          (click)="SaveCountry()"
          class="btn btn-primary"
          data-bs-dismiss="modal"
        >
          Confirm
        </button>
      </div>
    </div>
  </div>

  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Register New Worker</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <div class="panelbor">
            <div class="panel-body">
              <form [formGroup]="signupForm" (ngSubmit)="onSignUp()">
                <div class="form-group pt-3">
                  <div
                    class="input-field"
                    [class.error]="
                      signupForm.controls['firstName'].dirty &&
                      signupForm.hasError('required', 'firstName')
                    "
                  >
                    <span class="fa fa-user p-2" style="font-size: 24px"></span>
                    <input
                      formControlName="firstName"
                      type="text"
                      placeholder="FirstName"
                    />
                  </div>
                </div>
                <div class="invalid">
                  <span
                    *ngIf="
                      signupForm.controls['firstName'].dirty &&
                      signupForm.hasError('required', 'firstName')
                    "
                    class="text-danger"
                    >*FirstName is required</span
                  >
                </div>
                <div class="form-group pt-3">
                  <div
                    class="input-field"
                    [class.error]="
                      signupForm.controls['lastName'].dirty &&
                      signupForm.hasError('required', 'lastName')
                    "
                  >
                    <span class="fa fa-user p-2" style="font-size: 24px"></span>

                    <input
                      formControlName="lastName"
                      type="text"
                      placeholder="LastName"
                    />
                  </div>
                </div>
                <div class="invalid">
                  <span
                    *ngIf="
                      signupForm.controls['lastName'].dirty &&
                      signupForm.hasError('required', 'lastName')
                    "
                    class="text-danger"
                    >*LastName is required</span
                  >
                </div>
                <div class="form-group pt-3">
                  <div
                    class="input-field"
                    [class.error]="
                      signupForm.controls['password'].dirty &&
                      signupForm.hasError('required', 'password')
                    "
                  >
                    <span class="fa fa-lock p-2" style="font-size: 24px"></span>
                    <input
                      formControlName="password"
                      [type]="type"
                      placeholder="Password"
                    />
                    <span
                      ><i
                        (click)="hideShowPass()"
                        class="fa {{ eyeIcon }}"
                        style="margin-left: -30px; font-size: 20px"
                      ></i
                    ></span>
                  </div>
                </div>
                <div class="invalid">
                  <span
                    *ngIf="
                      signupForm.controls['password'].dirty &&
                      signupForm.hasError('required', 'password')
                    "
                    class="text-danger"
                    >*Password is required</span
                  >
                </div>

                <div class="form-group pt-3">
                  <div
                    class="input-field"
                    [class.error]="
                      signupForm.controls['email'].dirty &&
                      signupForm.hasError('required', 'email')
                    "
                  >
                    <span
                      class="fa fa-envelope p-2"
                      style="font-size: 20px; margin-left: -4px"
                    ></span>

                    <input
                      formControlName="email"
                      type="text"
                      placeholder="User E-mail Address"
                    />
                  </div>
                </div>
                <div class="invalid">
                  <span
                    *ngIf="
                      signupForm.controls['email'].dirty &&
                      signupForm.hasError('required', 'email')
                    "
                    class="text-danger"
                    >*Email is required</span
                  >
                </div>
                <div class="form-group pt-3">
                  <div class="input-field">
                    <span
                      class="fa fa-home p-2"
                      style="font-size: 24px; margin-left: -7px"
                    ></span>

                    <select (change)="getAllNeighborhoodById($event)">
                      <option value="" selected disabled>
                        --Select City --
                      </option>
                      <option *ngFor="let city of cities" [value]="city.id">
                        {{ city.name }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="form-group pt-3">
                  <div class="input-field">
                    <span
                      class="fa fa-home p-2"
                      style="font-size: 24px; margin-left: -7px"
                    ></span>

                    <select
                      [(ngModel)]="neighName"
                      formControlName="neigbName"
                      (change)="getNeighId($event)"
                    >
                      <option value="" disabled selected>
                        --Select Neighborhood --
                      </option>
                      <option
                        *ngFor="let neig of neighborhoods"
                        [value]="neig.neigbName"
                      >
                        {{ neig.neigbName }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="form-group pt-3">
                  <div
                    class="input-field"
                    [class.error]="
                      signupForm.controls['address'].dirty &&
                      signupForm.hasError('required', 'address')
                    "
                  >
                    <span
                      class="fa fa-home p-2"
                      style="font-size: 24px; margin-left: -7px"
                    ></span>

                    <input
                      formControlName="address"
                      type="text"
                      placeholder="User Address "
                    />
                    <input type="hidden" formControlName="city" />
                  </div>
                </div>
                <div class="invalid">
                  <span
                    *ngIf="
                      signupForm.controls['address'].dirty &&
                      signupForm.hasError('required', 'address')
                    "
                    class="text-danger"
                    >*Address is required</span
                  >
                </div>
                <button type="submit" class="btn col-md-5">Confirm</button>
                <input
                  formControlName="city"
                  type="hidden"
                  [(ngModel)]="cityName"
                />
              </form>
            </div>
          </div>
        </div>
      </form>
    </div>
  </ng-template>
</div>
