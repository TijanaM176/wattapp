<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round"
/>
<link
  rel="stylesheet"
  href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
/>
<link
  rel="stylesheet"
  href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
/>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

<script>
  $(document).ready(function () {
    $('[data-toggle="tooltip"]').tooltip();
  });
</script>
<div class="container-xl">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-sm-9">
            <h2>Employee <b>Overview</b></h2>
          </div>

          <div class="col-sm-3">
            <div class="search-box">
              <div class="input-group" style="width: 240px">
                <span class="input-group-addon"
                  ><i
                    class="material-icons"
                    style="margin-top: 30%; margin-right: 10%"
                    ></i
                  ></span
                >
                <input
                  type="text"
                  [(ngModel)]="searchName"
                  style="background-color: #f8f8fa; border-radius: 10px"
                  class="form-control"
                  placeholder="Search By Username"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>Username</th>
            <th>Region</th>
            <th>Assigned Role</th>
            <th>Options</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let item of employees
                | search : searchName
                | paginate
                  : {
                      itemsPerPage: perPage,
                      currentPage: page,
                      totalItems: total
                    };
              let i = index
            "
          >
            <td>
              <img
                src="assets/images/user.png"
                style="width: 30px; height: 30px"
              />
            </td>
            <td>{{ item.username }}</td>
            <td>{{ item.region }}</td>
            <td>{{ item.role }}</td>
            <td>
              <a
                (click)="Details(item.id)"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
                class="settings"
                title=""
                data-toggle="tooltip"
                data-original-title="Settings"
                ><i class="material-icons">info</i></a
              >
              <a
                (click)="onDelete(item.id)"
                class="delete"
                title=""
                data-toggle="tooltip"
                data-original-title="Delete"
                ><i class="material-icons"></i></a
              >
            </td>
          </tr>
        </tbody>
      </table>

      <div
        style="
          float: left;
          padding-left: 35%;
          text-align: center;
          margin-top: 1.5%;
          justify-content: center;
        "
      >
        <pagination-controls
          previousLabel="Prev"
          nextLabel="Next"
          (pageChange)="onTableDataChange($event)"
        >
        </pagination-controls>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" style="width: 60%">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title" id="exampleModalLabel" style="margin-left: 44%">
          <span style="color: #566787; font-size: 25px; font-weight: 700"
            >Info</span
          ><br />
        </p>

        <button
          type="button"
          id="closeBtn"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <div class="modal-body">
        <div class="slika">
          <img
            src="assets/images/default-image.png"
            style="
              height: 15%;
              width: 15%;
              justify-content: center;
              margin-left: 40%;
            "
          />
          <div
          *ngIf="value==='Dso'"
            style="margin-top: 5%; margin-left: 23%; margin-bottom: 3%"
          >
            <!--*ngIf="value==='admin'"-->
            <button
              data-bs-target="#Modal2"
              data-bs-toggle="modal"
              (click)="update(employee.id)"
              style="
                background-color: #d6d9df;
                margin-left: 10%;
                text-align: center;
                color: #566787;
                font-weight: bold;
                font-size: 16px;
                border: none;
                width: 100px;
                border-radius: 5px;
              "
            >
              <span
                ><i
                  style="color: #566787; font-size: 16px; margin-top: 5%"
                  class="material-icons"
                  >edit</i
                >
                Edit</span
              >
            </button>
            <button
              (click)="onDelete(employee.id)"
              data-bs-dismiss="modal"
              style="
                background-color: #d6d9df;
                margin-left: 10%;
                text-align: center;
                color: #566787;
                font-weight: bold;
                font-size: 16px;
                border: none;
                width: 100px;
                border-radius: 5px;
              "
            >
              <span
                ><i
                  style="color: #566787; font-size: 16px; margin-top: 5%"
                  class="material-icons"
                  >delete</i
                >
                Delete</span
              >
            </button>
          </div>
        </div>
        <div>
          <form [formGroup]="infoForm">
            <span>
              <div class="form-group" style="width: 100%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >First Name</label
                >
                <input
                  style="
                    width: 95%;
                    color: #d6d9df;
                    background-color: #566787;
                    font-weight: bold;
                  "
                  type="text"
                  class="form-control"
                  formControlName="firstName"
                />
              </div>
              <div class="form-group" style="width: 100%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >Last Name</label
                >
                <input
                  style="
                    width: 95%;
                    color: #d6d9df;
                    background-color: #566787;
                    font-weight: bold;
                  "
                  type="text"
                  class="form-control"
                  formControlName="lastName"
                />
              </div>
            </span>
            <span>
              <div class="form-group" style="width: 50%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >Starting date</label
                >
                <input
                  style="
                    width: 90%;
                    color: #d6d9df;
                    background-color: #566787;
                    font-weight: bold;
                  "
                  type="text"
                  class="form-control"
                  formControlName="dateCreate"
                />
              </div>
              <div class="form-group" style="width: 50%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >Salary</label
                >
                <input
                  style="
                    width: 90%;
                    color: #d6d9df;
                    background-color: #566787;
                    font-weight: bold;
                  "
                  type="text"
                  class="form-control"
                  formControlName="salary"
                />
              </div>
            </span>
            <div class="form-group" style="width: 50%; float: left">
              <label style="width: 90%; color: #566787; font-weight: bold"
                >Role</label
              >
              <input
                style="
                  width: 90%;
                  color: #d6d9df;
                  background-color: #566787;
                  font-weight: bold;
                "
                type="text"
                class="form-control"
                formControlName="role"
              />
            </div>
            <div class="form-group" style="width: 50%; float: left">
              <label style="width: 90%; color: #566787; font-weight: bold"
                >Region</label
              >
              <input
                style="
                  width: 90%;
                  color: #d6d9df;
                  background-color: #566787;
                  font-weight: bold;
                "
                type="text"
                class="form-control"
                formControlName="region"
              />
            </div>
            <div class="form-group" style="width: 100%">
              <label style="width: 90%; color: #566787; font-weight: bold"
                >Email</label
              >
              <input
                style="
                  width: 95%;
                  border-radius: 5px;
                  color: #d6d9df;
                  background-color: #566787;
                  font-weight: bold;
                "
                type="text"
                class="form-control"
                formControlName="email"
              />
            </div>
          </form>
        </div>
        <!--
        <div class="deo">
          <label style="color:#566787;font-weight: bold;">First Name</label>
              <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                <div *ngIf="employee != undefined">

                  <label style="margin-left:2%;"> {{employee.firstName}}</label>
                </div>

              </div>

          </div>
          <div class="deo">
            <label style="color:#566787;font-weight: bold;">Last Name</label>
                <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                  <div *ngIf="employee != undefined">

                    <label style="margin-left:2%;"> {{employee.lastName}}</label>
                  </div>

                </div>

          </div>
          <div class="deo">
            <label style="color:#566787;font-weight: bold;">Starting date</label>
                <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                  <div *ngIf="employee != undefined">

                    <label style="margin-left:2%;"> {{employee.dateCreate}}</label>
                  </div>

                </div>

          </div>
          <div class="deo">
            <label style="color:#566787;font-weight: bold;">Salary</label>
                <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                  <div *ngIf="employee != undefined">

                    <label style="margin-left:2%;"> {{employee.salary}}</label>
                  </div>

                </div>

          </div>
          <div class="deo">
            <label style="color:#566787;font-weight: bold;">Role</label>
                <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                  <div *ngIf="employee != undefined">

                    <label style="margin-left:2%;"> {{employee.role}}</label>
                  </div>

                </div>

          </div>
          <div class="deo">
            <label style="color:#566787;font-weight: bold;">Region</label>
                <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                  <div *ngIf="employee != undefined">

                    <label style="margin-left:2%;"> {{employee.region}}</label>
                  </div>

                </div>

          </div>
          <div class="deo">
            <label style="color:#566787;font-weight: bold;">Email</label>
                <div class="div" style="background-color: #566787;padding-top:1%;font-weight:500;border-radius: 5px;height:20%;color:#F9F9F9;">
                  <div *ngIf="employee != undefined">

                    <label style="margin-left:2%;"> {{employee.email}}</label>
                  </div>

                </div>

          </div>-->
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="Modal2"
  tabindex="-1"
  aria-labelledby="Modal2Label"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" style="width: 60%">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title" id="Modal2Label" style="margin-left: 38%">
          <span style="color: #566787; font-size: 25px; font-weight: 700"
            >Edit user profile</span
          ><br />
        </p>

        <button
          type="button"
          id="closeBtn1"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <div class="modal-body" style="background-color: white">
        <div class="slika" style="height: 20%; margin-left: 2%">
          <img
            src="assets/images/default-image.png"
            style="
              height: 15%;
              width: 15%;
              justify-content: center;
              margin-bottom: 2%;
            "
          />

          <button
            style="
              background-color: #566787;
              margin-left: 10%;
              text-align: center;
              color: white;
              font-weight: bold;
              font-size: 14px;
              border: none;
              width: 20%;
              border-radius: 5px;
            "
          >
            <span
              ><i
                style="color: #d6d9df; font-size: 16px; margin-top: 0%"
                class="material-icons"
                >edit</i
              >
              Change photo</span
            >
          </button>
        </div>
        <div>
          <form [formGroup]="updateForm">
            <span>
              <div class="form-group" style="width: 50%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >First Name</label
                >
                <input
                  style="
                    width: 90%;
                    border: 1px solid #566787;
                    color: #566787;
                    background-color: #e8f3f8;
                    font-weight: 600;
                  "
                  type="text"
                  class="form-control"
                  formControlName="firstName"
                />
              </div>
              <div class="form-group" style="width: 50%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >Last Name</label
                >
                <input
                  style="
                    width: 90%;
                    color: #566787;
                    border: 1px solid #566787;
                    background-color: #e8f3f8;
                    font-weight: 600;
                  "
                  type="text"
                  class="form-control"
                  formControlName="lastName"
                />
              </div>
            </span>
            <span>
              <div class="form-group" style="width: 50%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >Salary</label
                >
                <input
                  style="
                    width: 90%;
                    color: #566787;
                    border: 1px solid #566787;
                    background-color: #e8f3f8;
                    font-weight: 600;
                  "
                  type="text"
                  class="form-control"
                  formControlName="salary"
                />
              </div>
              <div class="form-group" style="width: 50%; float: left">
                <label style="width: 90%; color: #566787; font-weight: bold"
                  >Role</label
                >
                <select
                class="dropdown dropdown-toggle"
                style="width: 90%; color:#566787;
                border: 1px solid #566787;
                 background-color:#e8f3f8 ;
                 font-weight: 600;"
                name="regionId"
                class="form-control"
                formControlName="roleId"
                [(ngModel)]="role"
              >
                
                <option
                  *ngFor="let item of Role"
                  [value]="item.id"
                >
                  {{ item.roleName }}
                </option>
              </select>
              </div>
            </span>
            <div class="col-sm-12">
              
            </div>
            <div class="form-group" style="width: 50%; float: left">
              <label style="width: 90%; color: #566787; font-weight: bold"
                >Region</label
              >
              <select
                class="dropdown dropdown-toggle"
                style="width: 90%; color:#566787;
                border: 1px solid #566787;
                 background-color:#e8f3f8 ;
                 font-weight: 600;"
                name="regionId"
                
                class="form-control"
                formControlName="regionId"
                [(ngModel)]="region"
              >
                
                <option
                  *ngFor="let item of Region"
                  [value]="item.id"
                >
                  {{ item.regionName }}
                </option>
              </select>
            </div>
            <div class="form-group" style="width: 50%; float: left">
              <label style="width: 90%; color: #566787; font-weight: bold"
                >Email</label
              >
              <input
                style="
                  width: 90%;
                  color: #566787;
                  border: 1px solid #566787;
                  background-color: #e8f3f8;
                  font-weight: 600;
                "
                type="text"
                class="form-control"
                formControlName="email"
              />
            </div>
            <div class="form-group" style="width: 50%">
              <label style="width: 90%; color: #566787; font-weight: bold"
                >Password</label
              >
              <input
                style="
                  width: 90%;
                  color: #566787;
                  border: 1px solid #566787;
                  background-color: #e8f3f8;
                  font-weight: 600;
                "
                type="text"
                class="form-control"
                formControlName="password"
              />
            </div>
            <br />
            <button
              data-bs-target="#exampleModal"
              data-bs-toggle="modal"
              data-bs-dismiss="modal"
              (click)="onUpdate(employee.id)"
              style="
                font-size: 20px;
                background-color: #566787;
                border: none;
                color: white;
                width: 30%;
                border-radius: 5px;
                margin-left: 38%;
              "
              data-dismiss="modal"
              class="brn btn-update"
              type="submit"
            >
              Submit
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
